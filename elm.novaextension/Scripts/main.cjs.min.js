"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var n=function(){return(n=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function t(n){return n}var r=t;function e(n){return function(){return n}}var o=e(void 0);function u(n,t,r,e,o,u,i,c,f){switch(arguments.length){case 1:return n;case 2:return function(){return t(n.apply(this,arguments))};case 3:return function(){return r(t(n.apply(this,arguments)))};case 4:return function(){return e(r(t(n.apply(this,arguments))))};case 5:return function(){return o(e(r(t(n.apply(this,arguments)))))};case 6:return function(){return u(o(e(r(t(n.apply(this,arguments))))))};case 7:return function(){return i(u(o(e(r(t(n.apply(this,arguments)))))))};case 8:return function(){return c(i(u(o(e(r(t(n.apply(this,arguments))))))))};case 9:return function(){return f(c(i(u(o(e(r(t(n.apply(this,arguments)))))))))}}}function i(n,t,r,e,o,u,i,c,f,a,s,p,l,m,v,h,d,y,g,O){switch(arguments.length){case 1:return n;case 2:return t(n);case 3:return r(t(n));case 4:return e(r(t(n)));case 5:return o(e(r(t(n))));case 6:return u(o(e(r(t(n)))));case 7:return i(u(o(e(r(t(n))))));case 8:return c(i(u(o(e(r(t(n)))))));case 9:return f(c(i(u(o(e(r(t(n))))))));case 10:return a(f(c(i(u(o(e(r(t(n)))))))));case 11:return s(a(f(c(i(u(o(e(r(t(n))))))))));case 12:return p(s(a(f(c(i(u(o(e(r(t(n)))))))))));case 13:return l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))));case 14:return m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))));case 15:return v(m(l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))))));case 16:return h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))))));case 17:return d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))))))));case 18:return y(d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))))))));case 19:return g(y(d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))))))))));case 20:return O(g(y(d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))))))))))}}var c=function(n,t){return t},f=function(n,t){for(var r=0,e=t.length,o=n.length;r<e;r++,o++)n[o]=t[r];return n},a=function(n){return"Some"===n._tag},s={_tag:"None"},p=function(n){return{_tag:"Some",value:n}},l=function(n){return"Left"===n._tag},m=function(n){return{_tag:"Left",left:n}},v=function(n){return{_tag:"Right",right:n}},h=function(n){return[n]},d=function(n){return n.length>0},y=Object.prototype.hasOwnProperty,g=function(n,t){return{left:n,right:t}};function O(n,t){return function(r){var e=n.traverse(r);return function(n,o){return r.map(e(n,o),t.separate)}}}function w(n,t){return function(r){var e=n.traverse(r);return function(n,o){return r.map(e(n,o),t.compact)}}}var S=m,F=v,_=function(n){return function(t){return b(t)?t:F(n(t.right))}},P=function(n){return function(t){return b(t)?t:n(t.right)}},b=l,E=function(n){return"Right"===n._tag},N=function(n,t){return function(r){return b(r)?n(r.left):t(r.right)}},x=function(n){return function(t){return b(t)?n(t.left):t.right}},j=s,G=p;function M(n){return function(t){return n(t)?G(t):j}}var I=function(n){return"Left"===n._tag?j:G(n.right)},k=function(n,t){return i(n,T(t))},T=function(n){return function(t){return U(t)?j:G(n(t.value))}},L=function(n){return function(t){return U(t)?j:n(t.value)}},R=function(n){return function(t){return U(t)?n():t}},A=I,U=function(n){return"None"===n._tag},D=function(n,t){return function(r){return U(r)?n():t(r.value)}},K=function(n){return function(t){return U(t)?n():t.value}},C=K,z=function(n){return null==n?j:G(n)},Y=k,q=function(){return n={concat:t},{concat:function(t,r){return U(t)?r:U(r)?t:G(n.concat(t.value,r.value))},empty:j};var n},B=function(n){var t=W(n);return function(n,r){var e=t(n);return function(t){var o,u=e(t);return"None"===u._tag?((o=new Map(t)).set(n,r),o):u.value[1]!==r?((o=new Map(t)).set(u.value[0],r),o):t}}};function W(n){return function(t,r){if(void 0===r){var e=W(n);return function(n){return e(t,n)}}for(var o,u=r.entries();!(o=u.next()).done;){var i=o.value,c=i[0],f=i[1];if(n.equals(c,t))return p([c,f])}return s}}var $=function(n,t){return function(n,t){for(var r,e=new Map,o=n.entries();!(r=o.next()).done;){var u=r.value,i=u[0],c=u[1];e.set(i,t(i,c))}return e}(n,(function(n,r){return t(r)}))};function H(n){return u(F,n.of)}var J=function(n,t){return function(){return n().then(v,(function(n){return m(t(n))}))}},Q=H({URI:"Task",of:function(n){return function(){return Promise.resolve(n)}}})([]),V=function(n){var t=function(n){return function(t){return function(){return function(n){return n.slice(1)}(t).reduce((function(t,r,e){return t.then((function(o){return l(o)?t:n(e+1,r)().then((function(n){return l(n)?n:(o.right.push(n.right),o)}))}))}),n(0,function(n){return n[0]}(t))().then(_(h)))}}}(n);return function(n){return d(n)?t(n):Q}},X=function(n){return V((function(t,r){return n(r)}))}(t),Z=d,nn=function(n,t,r){if(r[n]===t)return r;var e=function(n){return f([n[0]],n.slice(1))}(r);return e[n]=t,e},tn={equals:function(n,t){return n===t}},rn={equals:tn.equals,compare:function(n,t){return n<t?-1:n>t?1:0}},en=function(n){return 0===n.length},on=i,un=function(n,t){return{_tag:"Concat",left:n,right:t}};function cn(){return{concat:un}}var fn={is:function(n){return"string"==typeof n}},an={is:function(n){return"boolean"==typeof n}};var sn=cn(),pn={URI:"Either",_E:void 0,map:function(n,t){return on(n,_(t))},ap:function(n,t){return b(n)?b(t)?S(sn.concat(n.left,t.left)):n:b(t)?t:F(n.right(t.right))},of:F,chain:function(n,t){return on(n,P(t))},throwError:S,bimap:function(n,t,r){return on(n,function(n,t){return function(r){return b(r)?S(n(r.left)):F(t(r.right))}}(t,r))},mapLeft:function(n,t){return on(n,function(n){return function(t){return b(t)?S(n(t.left)):t}}(t))},alt:function(n,t){if(E(n))return n;var r=t();return b(r)?S(sn.concat(n.left,r.left)):r}},ln=function(n,t){return function(n,t){return function(n){return function(t,r){return{decode:function(e){return t(e)?n.of(e):n.throwError(r(e))}}}}(pn)(n,(function(n){return{_tag:"Of",value:function(n,t){return{_tag:"Leaf",actual:n,error:t}}(n,t)}}))}(n.is,t)},mn=ln(fn,"string"),vn=ln(an,"boolean"),hn=Z,dn=function(n,t){return n<0||n>=t.length};function yn(n,t){return void 0===t?function(t){return yn(n,t)}:dn(n,t)?s:p(t[n])}var gn=function(n){return function(t){for(var r=0;r<t.length;r++)if(n(t[r]))return p(r);return s}};function On(n){return function(t){for(var r=0;r<t.length;r++)if(n(t[r]))return p(t[r]);return s}}var wn=function(n,t,r){return hn(r)?nn(n,t,r):r},Sn=function(n){return[n]},Fn=r;function _n(n){var t,r=(t=n,{URI:En,_E:void 0,map:Pn,ap:function(n,r){return Fn(t.concat(n,r))}});return{URI:En,_E:void 0,map:r.map,ap:r.ap,of:function(){return Fn(n.empty)}}}var Pn=function(n,t){return i(n,bn(t))},bn=function(){return r},En="Const",Nn={concat:function(n,t){return n&&t},empty:!0},xn={concat:function(n,t){return n||t},empty:!1},jn=function(n){return function(t){return Object.keys(t).sort(n.compare)}};function Gn(n,t){return void 0===t?function(t){return Gn(n,t)}:y.call(t,n)?p(t[n]):s}var Mn={};function In(n){return function(t){var r={};for(var e in t)y.call(t,e)&&(r[e]=n(e,t[e]));return r}}function kn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(2===n.length)return kn(rn).apply(void 0,n);var r=jn(n[0]);return function(n,t){return function(e){for(var o=n,u=r(e),i=u.length,c=0;c<i;c++){var f=u[c];o=t(f,o,e[f])}return o}}}function Tn(n){if("compare"in n){var t=jn(n);return function(n){return function(r){return function(e){for(var o=n.empty,u=t(e),i=u.length,c=0;c<i;c++){var f=u[c];o=n.concat(o,r(f,e[f]))}return o}}}}return Tn(rn)(n)}function Ln(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(2===n.length)return Ln(rn).apply(void 0,n);var r=jn(n[0]);return function(n,t){return function(e){for(var o=n,u=r(e),i=u.length-1;i>=0;i--){var c=u[i];o=t(c,e[c],o)}return o}}}function Rn(n){return Bn(rn)(n)}var An=function(n,t){return i(n,function(n){return In((function(t,r){return n(r)}))}(t))},Un=function(n){var t=$n(n);return function(n,r,e){return i(n,t(r,e))}},Dn=function(n){return function(t){var r=Hn(n)(t);return function(n,t){return i(n,r(t))}}},Kn=function(n){var t=Jn(n);return function(n,r,e){return i(n,t(r,e))}},Cn=function(n){var t=kn(n);return function(n,r,e){return i(n,t(r,e))}},zn=function(n){var t=Tn(n);return function(n){var r=t(n);return function(n,t){return i(n,r(t))}}},Yn=function(n){var t=Ln(n);return function(n,r,e){return i(n,t(r,e))}},qn=function(n){var t=Wn(n);return function(n){var r=t(n);return function(n,t){return r(n,u(c,t))}}},Bn=function(n){var r=qn(n);return function(n){var e=r(n);return function(n){return e(n,t)}}},Wn=function(n){return function(t){var r=jn(n);return function(n,e){var o=r(n);if(0===o.length)return t.of(Mn);for(var u=t.of({}),i=function(r){u=t.ap(t.map(u,(function(n){return function(t){return n[r]=t,n}})),e(r,n[r]))},c=0,f=o;c<f.length;c++){i(f[c])}return u}}};function $n(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(1===n.length){var r=kn(n[0]);return function(n,t){return r(n,(function(n,r,e){return t(r,e)}))}}return $n(rn).apply(void 0,n)}function Hn(n){if("compare"in n){var t=Tn(n);return function(n){var r=t(n);return function(n){return r((function(t,r){return n(r)}))}}}return Hn(rn)(n)}function Jn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(1===n.length){var r=Ln(n[0]);return function(n,t){return r(n,(function(n,r,e){return t(r,e)}))}}return Jn(rn).apply(void 0,n)}var Qn=function(n){var t={};for(var r in n)if(y.call(n,r)){var e=n[r];a(e)&&(t[r]=e.value)}return t},Vn=function(n){var t={},r={};for(var e in n)if(y.call(n,e)){var o=n[e];l(o)?t[e]=o.left:r[e]=o.right}return g(t,r)},Xn="ReadonlyRecord",Zn={URI:Xn,compact:Qn,separate:Vn};Un(rn),Dn(rn),Kn(rn),Un(rn),Dn(rn),Kn(rn),Cn(rn),zn(rn),Yn(rn);var nt={URI:Xn,map:An,reduce:Un(rn),foldMap:Dn(rn),reduceRight:Kn(rn),traverse:qn(rn),sequence:Rn};Un(rn),Dn(rn),Kn(rn),Cn(rn),zn(rn),Yn(rn),qn(rn),Wn(rn);w(nt,Zn),O(nt,Zn);Un(rn),Dn(rn),Kn(rn),qn(rn);var tt=function(n,t){return function(r){if(y.call(r,n)&&r[n]===t)return r;var e=Object.assign({},r);return e[n]=t,e}};Un(rn),Dn(rn),Kn(rn),qn(rn),Cn(rn),zn(rn),Yn(rn),Wn(rn);var rt=function(){for(var n=0,t=0,r=arguments.length;t<r;t++)n+=arguments[t].length;var e=Array(n),o=0;for(t=0;t<r;t++)for(var u=arguments[t],i=0,c=u.length;i<c;i++,o++)e[o]=u[i];return e},et=function(n){return ot(n.get,u(n.reverseGet,e))},ot=function(n,t){return{get:n,set:t}},ut=function(n){return yt(u(n.get,G),n.set)},it=function(n){return function(t){return ot((function(r){return n.get(t.get(r))}),(function(r){return function(e){return t.set(n.set(r)(t.get(e)))(e)}}))}},ct=function(n,t){return{getOption:n,reverseGet:t}},ft=function(n){return yt(n.getOption,(function(t){return pt(t)(n)}))},at=function(n){return Ft((function(t){return function(r){return function(e){return on(n.getOption(e),D((function(){return t.of(e)}),(function(o){return t.map(r(o),(function(t){return pt(t)(n)(e)}))})))}}}))},st=function(n){return function(t){var r=function(n){return function(t){return function(r){return on(t.getOption(r),T((function(e){var o=n(e);return o===e?r:t.reverseGet(o)})))}}}(n)(t);return function(n){return on(r(n),C((function(){return n})))}}},pt=function(n){return st((function(){return n}))},lt=function(){return ct(z,t)},mt=function(n){return ct(M(n),t)},vt=function(){return ct(t,G)},ht=function(){return ct(A,F)},dt=function(){return ct((function(n){return b(n)?G(n.left):j}),S)},yt=function(n,t){return{getOption:n,set:t}},gt=function(n){return function(t){return function(r){return on(t.getOption(r),T((function(e){var o=n(e);return o===e?r:t.set(o)(r)})))}}},Ot=function(n){return function(t){var r=gt(n)(t);return function(n){return on(r(n),C((function(){return n})))}}},wt=function(n){return function(t){return yt(u(t.getOption,L(n.getOption)),(function(r){return Ot(n.set(r))(t)}))}},St=function(n,t,r){if(r[n]===t)return r;var e=rt([r[0]],r.slice(1));return e[n]=t,e},Ft=function(n){return{modifyF:n}};function _t(n){return function(t){return Ft((function(r){return function(e){return t.modifyF(r)(n.modifyF(r)(e))}}))}}var Pt={URI:"Identity",map:function(n,t){return t(n)},of:t,ap:function(n,t){return n(t)}};function bt(n){return _t(function(n){return function(){return Ft((function(t){var r=function(n){return"Identity"===n.URI}(t)?n.map:n.traverse(t);return function(n){return function(t){return r(t,n)}}}))}}(n)())}var Et=function(n){return{index:n}},Nt=function(){return Et((function(n){return yt((function(t){return yn(n,t)}),(function(t){return function(r){return on(yn(n,r),D((function(){return r}),(function(){return wn(n,t,r)})))}}))}))},xt=function(){return Et((function(n){return yt((function(t){return yn(n,t)}),(function(t){return function(r){return on(yn(n,r),D((function(){return r}),(function(){return St(n,t,r)})))}}))}))},jt=function(){return Et((function(n){return yt((function(t){return Gn(n,t)}),(function(t){return function(r){return r[n]===t||U(Gn(n,r))?r:tt(n,t)(r)}}))}))};var Gt=et,Mt=function(n){return ct(u(n.get,G),n.reverseGet)},It=function(n){return yt(u(n.get,G),u(n.reverseGet,e))},kt=function(n){return Ft((function(t){return function(r){return function(e){return t.map(r(n.get(e)),(function(t){return n.reverseGet(t)}))}}}))},Tt=ot,Lt=function(){return ot(t,e)},Rt=ut,At=function(n){return Ft((function(t){return function(r){return function(e){return t.map(r(n.get(e)),(function(t){return n.set(t)(e)}))}}}))},Ut=it,Dt=Ut,Kt=u(et,Ut),Ct=function(n){return function(t){return wt(ft(n))(ut(t))}},zt=function(n){return u(Rt,wt(n))},Yt=function(n){return function(t){return function(r){var e=t.get(r),o=n(e);return e===o?r:t.set(o)(r)}}};var qt=function(n){return function(t){return ot((function(r){return t.get(r)[n]}),(function(r){return function(e){var o,u=t.get(e);return r===u[n]?e:t.set(Object.assign({},u,((o={})[n]=r,o)))(e)}}))}},Bt=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){return ot((function(r){for(var e=t.get(r),o={},u=0,i=n;u<i.length;u++){var c=i[u];o[c]=e[c]}return o}),(function(r){return function(e){for(var o=t.get(e),u=0,i=n;u<i.length;u++){var c=i[u];if(r[c]!==o[c])return t.set(Object.assign({},o,r))(e)}return e}}))}},Wt=function(n){return function(t){return ot((function(r){return t.get(r)[n]}),(function(r){return function(e){var o=t.get(e);if(r===o[n])return e;var u=o.slice();return u[n]=r,t.set(u)(e)}}))}},$t=function(n){return function(t){return on(t,it(function(n){return{at:n}}((function(n){return ot((function(t){return Gn(n,t)}),D((function(){return t=n,function(n){if(!y.call(n,t))return n;var r=Object.assign({},n);return delete r[t],r};var t}),(function(t){return tt(n,t)})))})).at(n)))}},Ht=Ct(vt()),Jt=Ct(ht()),Qt=Ct(dt());var Vt=function(n,t,r){return Tt(u(n.get,t),u(r,n.set))},Xt="monocle-ts/Lens",Zt={URI:Xt,imap:Vt},nr={URI:Xt,compose:function(n,t){return Ut(n)(t)}},tr={URI:Xt,compose:nr.compose,id:Lt},rr=Object.freeze({__proto__:null,lens:Tt,id:Lt,asOptional:Rt,asTraversal:At,compose:Ut,composeLens:Dt,composeIso:Kt,composePrism:Ct,composeOptional:zt,composeTraversal:function(n){return u(At,_t(n))},modify:Yt,modifyF:function(n){return function(t){return function(r){return function(e){return on(r.get(e),t,(function(t){return n.map(t,(function(n){return r.set(n)(e)}))}))}}}},fromNullable:function(n){return Ct(lt())(n)},filter:function(n){return Ct(mt(n))},prop:qt,props:Bt,component:Wt,index:function(n){return u(Rt,function(n){return function(t){return on(t,wt(Nt().index(n)))}}(n))},indexNonEmpty:function(n){return u(Rt,function(n){return function(t){return on(t,wt(xt().index(n)))}}(n))},key:function(n){return u(Rt,function(n){return function(t){return on(t,wt(jt().index(n)))}}(n))},atKey:$t,some:Ht,right:Jt,left:Qt,traverse:function(n){return u(At,bt(n))},findFirst:function(n){return zt(function(n){return yt(On(n),(function(t){return function(r){return on(gn(n)(r),D((function(){return r}),(function(n){return wn(n,t,r)})))}}))}(n))},findFirstNonEmpty:function(n){return zt(function(n){return yt(On(n),(function(t){return function(r){return on(gn(n)(r),D((function(){return r}),(function(n){return St(n,t,r)})))}}))}(n))},imap:function(n,t){return function(r){return Vt(r,n,t)}},URI:Xt,Invariant:Zt,Semigroupoid:nr,Category:tr}),er=function(n){return Ft((function(t){return function(r){return function(e){return on(n.getOption(e),D((function(){return t.of(e)}),(function(o){return t.map(r(o),(function(t){return n.set(t)(e)}))})))}}}))},or=wt,ur=gt,ir=Ot;ft(lt()),ft(vt()),ft(ht()),ft(dt());var cr=mt,fr=ft,ar=at,sr=function(n){return function(t){return ct(u(t.getOption,L(n.getOption)),u(n.reverseGet,t.reverseGet))}},pr=function(n){return function(t){return wt(ut(n))(ft(t))}},lr=_t,mr=function(n){return function(t){return t.modifyF(Pt)(n)}};var vr=function(n){return new Or(n.get,n.set)},hr=function(n){return new wr(n.getOption,n.reverseGet)},dr=function(n){return new Fr(n.getOption,n.set)},yr=function(n){return new _r(n.modifyF)},gr=function(n,t,r){var e;return r===n[t]?n:Object.assign({},n,((e={})[t]=r,e))},Or=function(){function n(n,t){this.get=n,this.set=t,this._tag="Lens"}return n.fromPath=function(){var t=n.fromProp();return function(n){var r=t(n[0]);return n.slice(1).reduce((function(n,r){return n.compose(t(r))}),r)}},n.fromProp=function(){return function(n){return vr(on(Lt(),qt(n)))}},n.fromProps=function(){return function(n){return vr(on(Lt(),Bt.apply(rr,n)))}},n.fromNullableProp=function(){return function(t,r){return new n((function(n){var e=z(n[t]);return U(e)?r:e.value}),(function(n){return function(r){return gr(r,t,n)}}))}},n.prototype.modify=function(n){return Yt(n)(this)},n.prototype.asOptional=function(){return dr(Rt(this))},n.prototype.asTraversal=function(){return yr(At(this))},n.prototype.asSetter=function(){var n=this;return new Er((function(t){return n.modify(t)}))},n.prototype.asGetter=function(){var n=this;return new Pr((function(t){return n.get(t)}))},n.prototype.asFold=function(){var n=this;return new br((function(){return function(t){return function(r){return t(n.get(r))}}}))},n.prototype.compose=function(n){return vr(Ut(n)(this))},n.prototype.composeLens=function(n){return this.compose(n)},n.prototype.composeGetter=function(n){return this.asGetter().compose(n)},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeOptional=function(n){return dr(on(this,Rt,or(n)))},n.prototype.composeTraversal=function(n){return yr(on(this,At,lr(n)))},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeIso=function(n){return vr(on(this,Ut(on(n,Gt))))},n.prototype.composePrism=function(n){return dr(Ct(n)(this))},n}(),wr=function(){function n(n,t){this.getOption=n,this.reverseGet=t,this._tag="Prism"}return n.fromPredicate=function(n){return hr(cr(n))},n.some=function(){return Sr},n.prototype.modify=function(n){var t=this;return function(r){var e=t.modifyOption(n)(r);return U(e)?r:e.value}},n.prototype.modifyOption=function(n){var t=this;return function(r){return Y(t.getOption(r),(function(e){var o=n(e);return o===e?r:t.reverseGet(o)}))}},n.prototype.set=function(n){return this.modify((function(){return n}))},n.prototype.asOptional=function(){return dr(fr(this))},n.prototype.asTraversal=function(){return yr(ar(this))},n.prototype.asSetter=function(){var n=this;return new Er((function(t){return n.modify(t)}))},n.prototype.asFold=function(){var n=this;return new br((function(t){return function(r){return function(e){var o=n.getOption(e);return U(o)?t.empty:r(o.value)}}}))},n.prototype.compose=function(n){return hr(sr(n)(this))},n.prototype.composePrism=function(n){return this.compose(n)},n.prototype.composeOptional=function(n){return dr(on(this,fr,or(n)))},n.prototype.composeTraversal=function(n){return yr(on(this,ar,lr(n)))},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeIso=function(n){return hr(on(this,sr(on(n,Mt))))},n.prototype.composeLens=function(n){return dr(pr(n)(this))},n.prototype.composeGetter=function(n){return this.asFold().compose(n.asFold())},n}(),Sr=new wr(t,G),Fr=function(){function n(n,t){this.getOption=n,this.set=t,this._tag="Optional"}return n.fromPath=function(){var t=n.fromNullableProp();return function(n){var r=t(n[0]);return n.slice(1).reduce((function(n,r){return n.compose(t(r))}),r)}},n.fromNullableProp=function(){return function(t){return new n((function(n){return z(n[t])}),(function(n){return function(r){return null==r[t]?r:gr(r,t,n)}}))}},n.fromOptionProp=function(){var n=Or.fromProp();return function(t){return n(t).composePrism(Sr)}},n.prototype.modify=function(n){return ir(n)(this)},n.prototype.modifyOption=function(n){return ur(n)(this)},n.prototype.asTraversal=function(){return yr(er(this))},n.prototype.asFold=function(){var n=this;return new br((function(t){return function(r){return function(e){var o=n.getOption(e);return U(o)?t.empty:r(o.value)}}}))},n.prototype.asSetter=function(){var n=this;return new Er((function(t){return n.modify(t)}))},n.prototype.compose=function(n){return dr(or(n)(this))},n.prototype.composeOptional=function(n){return this.compose(n)},n.prototype.composeTraversal=function(n){return yr(on(this,er,lr(n)))},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeLens=function(n){return dr(on(this,or(on(n,Rt))))},n.prototype.composePrism=function(n){return dr(on(this,or(on(n,fr))))},n.prototype.composeIso=function(n){return dr(on(this,or(on(n,It))))},n.prototype.composeGetter=function(n){return this.asFold().compose(n.asFold())},n}(),_r=function(){function n(n){this.modifyF=n,this._tag="Traversal"}return n.prototype.modify=function(n){return mr(n)(this)},n.prototype.set=function(n){return function(n){return mr((function(){return n}))}(n)(this)},n.prototype.filter=function(n){return yr(function(n){return lr(at(mt(n)))}(n)(this))},n.prototype.asFold=function(){var n=this;return new br((function(t){return function(r){return n.modifyF(_n(t))((function(n){return Fn(r(n))}))}}))},n.prototype.asSetter=function(){var n=this;return new Er((function(t){return n.modify(t)}))},n.prototype.compose=function(n){return yr(lr(n)(this))},n.prototype.composeTraversal=function(n){return this.compose(n)},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeOptional=function(n){return this.compose(n.asTraversal())},n.prototype.composeLens=function(n){return yr(on(this,lr(on(n,At))))},n.prototype.composePrism=function(n){return yr(on(this,lr(on(n,ar))))},n.prototype.composeIso=function(n){return yr(on(this,lr(on(n,kt))))},n.prototype.composeGetter=function(n){return this.asFold().compose(n.asFold())},n}(),Pr=function(){function n(n){this.get=n,this._tag="Getter"}return n.prototype.asFold=function(){var n=this;return new br((function(){return function(t){return function(r){return t(n.get(r))}}}))},n.prototype.compose=function(t){var r=this;return new n((function(n){return t.get(r.get(n))}))},n.prototype.composeGetter=function(n){return this.compose(n)},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeLens=function(n){return this.compose(n.asGetter())},n.prototype.composeIso=function(n){return this.compose(n.asGetter())},n.prototype.composeTraversal=function(n){return this.asFold().compose(n.asFold())},n.prototype.composeOptional=function(n){return this.asFold().compose(n.asFold())},n.prototype.composePrism=function(n){return this.asFold().compose(n.asFold())},n}(),br=function(){function n(n){this.foldMap=n,this._tag="Fold",this.getAll=n({concat:function(n,t){return n.concat(t)},empty:[]})(Sn),this.exist=n(xn),this.all=n(Nn),this.foldMapFirst=n(q())}return n.prototype.compose=function(t){var r=this;return new n((function(n){return function(e){return r.foldMap(n)(t.foldMap(n)(e))}}))},n.prototype.composeFold=function(n){return this.compose(n)},n.prototype.composeGetter=function(n){return this.compose(n.asFold())},n.prototype.composeTraversal=function(n){return this.compose(n.asFold())},n.prototype.composeOptional=function(n){return this.compose(n.asFold())},n.prototype.composeLens=function(n){return this.compose(n.asFold())},n.prototype.composePrism=function(n){return this.compose(n.asFold())},n.prototype.composeIso=function(n){return this.compose(n.asFold())},n.prototype.find=function(n){return this.foldMapFirst(M(n))},n.prototype.headOption=function(n){return this.find((function(){return!0}))(n)},n}(),Er=function(){function n(n){this.modify=n,this._tag="Setter"}return n.prototype.set=function(n){return this.modify(e(n))},n.prototype.compose=function(t){var r=this;return new n((function(n){return r.modify(t.modify(n))}))},n.prototype.composeSetter=function(n){return this.compose(n)},n.prototype.composeTraversal=function(n){return this.compose(n.asSetter())},n.prototype.composeOptional=function(n){return this.compose(n.asSetter())},n.prototype.composeLens=function(n){return this.compose(n.asSetter())},n.prototype.composePrism=function(n){return this.compose(n.asSetter())},n.prototype.composeIso=function(n){return this.compose(n.asSetter())},n}(),Nr={},xr={};Object.defineProperty(xr,"__esModule",{value:!0}),xr.AnonymousSelect=xr.NamedSelect=xr.Not=xr.Guard=xr.PatternKind=void 0,xr.PatternKind=Symbol("@ts-pattern/pattern-kind"),xr.Guard=Symbol("@ts-pattern/guard"),xr.Not=Symbol("@ts-pattern/not"),xr.NamedSelect=Symbol("@ts-pattern/named-select"),xr.AnonymousSelect=Symbol("@ts-pattern/anonymous-select");var jr={};!function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.instanceOf=n.select=n.ANONYMOUS_SELECT_KEY=n.not=n.when=void 0;const t=xr;n.when=n=>({[t.PatternKind]:t.Guard,[t.Guard]:n});n.not=n=>({[t.PatternKind]:t.Not,[t.Not]:n}),n.ANONYMOUS_SELECT_KEY="@ts-pattern/__anonymous-select-key",n.select=function(n){return void 0===n?{[t.PatternKind]:t.AnonymousSelect}:{[t.PatternKind]:t.NamedSelect,[t.NamedSelect]:n}};n.instanceOf=t=>n.when(function(n){return t=>t instanceof n}(t))}(jr);var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.__=void 0;const Mr=jr;const Ir=Mr.when((function(n){return!0})),kr=Mr.when((function(n){return"string"==typeof n})),Tr=Mr.when((function(n){return"number"==typeof n&&!Number.isNaN(n)})),Lr=Mr.when((function(n){return"boolean"==typeof n})),Rr=Mr.when((function(n){return null==n}));Gr.__=Object.assign(Ir,{string:kr,number:Tr,boolean:Lr,nullish:Rr}),function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isMatching=n.match=n.instanceOf=n.select=n.not=n.when=n.__=void 0;const t=xr,r=jr;Object.defineProperty(n,"when",{enumerable:!0,get:function(){return r.when}}),Object.defineProperty(n,"not",{enumerable:!0,get:function(){return r.not}}),Object.defineProperty(n,"select",{enumerable:!0,get:function(){return r.select}}),Object.defineProperty(n,"instanceOf",{enumerable:!0,get:function(){return r.instanceOf}});const e=Gr;Object.defineProperty(n,"__",{enumerable:!0,get:function(){return e.__}});n.match=n=>o(n,[]);const o=(n,t)=>{const e=()=>{const r=t.find((({test:t})=>t(n)));if(!r){let t;try{t=JSON.stringify(n)}catch(r){t=n}throw new Error(`Pattern matching error: no pattern matches value ${t}`)}return r.handler(r.select(n),n)};return{with(...e){const u=e[e.length-1],c=[],f=[];for(let n=0;n<e.length-1;n++){const t=e[n];"function"==typeof t?f.push(t):c.push(t)}let a={};return o(n,t.concat([{test:n=>Boolean(c.some((t=>i(t,n,((n,t)=>{a[n]=t}))))&&f.every((t=>t(n)))),handler:u,select:n=>Object.keys(a).length?void 0!==a[r.ANONYMOUS_SELECT_KEY]?a[r.ANONYMOUS_SELECT_KEY]:a:n}]))},when:(r,e)=>o(n,t.concat([{test:r,handler:e,select:n=>n}])),otherwise:r=>o(n,t.concat([{test:()=>!0,handler:r,select:n=>n}])).run(),exhaustive:()=>e(),run:e}},u=n=>Boolean(n&&"object"==typeof n),i=(n,o,c)=>{if(u(n)){if((f=n)&&f[t.PatternKind]===t.Guard)return Boolean(n[t.Guard](o));if((n=>n&&n[t.PatternKind]===t.NamedSelect)(n))return c(n[t.NamedSelect],o),!0;if((n=>n&&n[t.PatternKind]===t.AnonymousSelect)(n))return c(r.ANONYMOUS_SELECT_KEY,o),!0;if((n=>n&&n[t.PatternKind]===t.Not)(n))return!i(n[t.Not],o,c);if(!u(o))return!1;if(Array.isArray(n)){if(!Array.isArray(o))return!1;if(1===n.length){const t={},r=(n,r)=>{t[n]=(t[n]||[]).concat([r])},e=o.every((t=>i(n[0],t,r)));return e&&Object.keys(t).forEach((n=>c(n,t[n]))),e}return n.length===o.length&&n.every(((n,t)=>i(n,o[t],c)))}if(n instanceof Map)return o instanceof Map&&[...n.keys()].every((t=>i(n.get(t),o.get(t),c)));if(n instanceof Set){if(!(o instanceof Set))return!1;if(0===n.size)return 0===o.size;if(1===n.size){const[t]=[...n.values()];return Object.values(e.__).includes(t)?i([t],[...o.values()],c):o.has(t)}return[...n.values()].every((n=>o.has(n)))}return Object.keys(n).every((t=>t in o&&i(n[t],o[t],c)))}var f;return o===n};n.isMatching=function(...n){if(1===n.length){const[t]=n;return n=>i(t,n,(()=>{}))}if(2===n.length){const[t,r]=n;return i(t,r,(()=>{}))}throw new Error(`isMatching wasn't given enough arguments: expected 1 or 2, received ${n.length}.`)}}(Nr);var Ar,Ur=function(n){return"boolean"==typeof n&&!n};!function(n){n.FormatterPath="hansjhoffman.elm.config.elmFormatPath",n.FormatOnSave="hansjhoffman.elm.config.formatOnSave",n.FormatDocument="hansjhoffman.elm.commands.formatDocument"}(Ar||(Ar={}));var Dr=nova.inDevMode()?nova.extension.path:nova.extension.globalStoragePath,Kr={workspace:{formatOnSave:i(z(nova.workspace.config.get(Ar.FormatOnSave)),L((function(n){return A(vn.decode(n))})),K((function(){return!1}))),formatterPath:i(z(nova.workspace.config.get(Ar.FormatterPath)),L((function(n){return A(mn.decode(n))})),L(M((function(n){return Ur(en(n))}))))},global:{formatOnSave:i(z(nova.config.get(Ar.FormatOnSave)),L((function(n){return A(vn.decode(n))})),K((function(){return!1}))),formatterPath:i(z(nova.config.get(Ar.FormatterPath)),L((function(n){return A(mn.decode(n))})),L(M((function(n){return Ur(en(n))}))))}},Cr=Or.fromPath()(["workspace"]),zr=Or.fromPath()(["global"]),Yr=new CompositeDisposable,qr=new Map,Br=function(n){var t=Cr.get(n),r=zr.get(n);return t.formatOnSave||r.formatOnSave},Wr=function(n){i(z(n.document.syntax),L(M((function(n){return tn.equals(n,"elm")}))),D(o,(function(t){qr=B(tn)(n.document.uri,n.onWillSave(Hr))(qr)})))},$r=function(){var n;i(qr,(n=function(n){return n.dispose()},function(t){return $(t,n)})),qr=new Map},Hr=function(n){i(function(n){var t=Cr.get(n),r=zr.get(n);return i(t.formatterPath,R((function(){return r.formatterPath})))}(Kr),D((function(){return console.log(nova.localize("Skipping")+"... "+nova.localize("No formatter set")+".")}),(function(t){var r,e,o=new Range(0,n.document.length),u=n.document.getTextInRange(o);(r=u,e=t,J((function(){return new Promise((function(n,t){var o=new Process(e,{args:["--stdin"],stdio:["pipe","pipe","ignore"]}),u="";o.onStdout((function(n){return u+=n})),o.onDidExit((function(r){return 0===r?n(u):t()}));var i=o.stdin.getWriter();i.ready.then((function(){i.write(r),i.close()})),o.start()}))}),(function(){return{_tag:"invokeFormatterError",reason:nova.localize("Failed to format the document")+"."}})))().then(N((function(n){return Nr.match(n).with({_tag:"invokeFormatterError"},(function(n){var t=n.reason;return console.error(t)})).exhaustive()}),(function(t){n.edit((function(n){n.replace(o,t)})).then((function(){console.log(nova.localize("Formatted")+" "+n.document.path)})).catch((function(){console.error(""+nova.localize("Failed to replace editor text in-memory"))}))})))})))};exports.activate=function(){console.log(nova.localize("Activating")+"..."),function(n){if(nova.inDevMode()){var t=new NotificationRequest("elm-nova-notification");t.title=nova.extension.name,t.body=n,nova.notifications.add(t)}}(nova.localize("Starting extension")+"..."),Yr.add(nova.workspace.onDidAddTextEditor((function(n){Br(Kr)&&Wr(n)}))),Yr.add(nova.commands.register(Ar.FormatDocument,Hr)),Yr.add(nova.workspace.config.onDidChange(Ar.FormatterPath,(function(t,r){Kr=Cr.modify((function(r){return n(n({},r),{formatterPath:A(mn.decode(t))})}))(Kr),Br(Kr)&&($r(),nova.workspace.textEditors.forEach(Wr))}))),Yr.add(nova.workspace.config.onDidChange(Ar.FormatOnSave,(function(t,r){Kr=Cr.modify((function(r){return n(n({},r),{formatOnSave:i(vn.decode(t),x((function(){return!1})))})}))(Kr);var e=Br(Kr);$r(),e&&nova.workspace.textEditors.forEach(Wr)}))),Yr.add(nova.config.onDidChange(Ar.FormatterPath,(function(t,r){Kr=zr.modify((function(r){return n(n({},r),{formatterPath:A(mn.decode(t))})}))(Kr),Br(Kr)&&($r(),nova.workspace.textEditors.forEach(Wr))}))),Yr.add(nova.config.onDidChange(Ar.FormatOnSave,(function(t,r){Kr=zr.modify((function(r){return n(n({},r),{formatOnSave:i(vn.decode(t),x((function(){return!1})))})}))(Kr);var e=Br(Kr);$r(),e&&nova.workspace.textEditors.forEach(Wr)}))),X([J((function(){return new Promise((function(n,t){var r=new Process("/usr/bin/env",{args:["npm","install","--only=prod","--no-audit"],cwd:Dr});r.onDidExit((function(r){return 0===r?n():t()})),r.start()}))}),(function(){return{_tag:"installDepsError",reason:"Failed to install extension deps."}}))])().then(N((function(n){Nr.match(n).with({_tag:"installDepsError"},(function(n){var t=n.reason;return console.error(t)})).exhaustive()}),(function(){return console.log("Activated 🎉. Happy Elm-ing :)")})))},exports.deactivate=function(){console.log(nova.localize("Deactivating")+"..."),$r(),Yr.dispose()};
//# sourceMappingURL=main.cjs.min.js.map
